<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Dand</title>
<meta name=keywords content><meta name=description content="Posts - Dand"><meta name=author content="Dand"><link rel=canonical href=https://dandkong.github.io/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://dandkong.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://dandkong.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://dandkong.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://dandkong.github.io/apple-touch-icon.png><link rel=mask-icon href=https://dandkong.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://dandkong.github.io/posts/index.xml><link rel=alternate hreflang=zh href=https://dandkong.github.io/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Posts"><meta property="og:description" content="Dand's Blog"><meta property="og:type" content="website"><meta property="og:url" content="https://dandkong.github.io/posts/"><meta property="og:image" content="https://dandkong.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="Dand's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dandkong.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Posts"><meta name=twitter:description content="Dand's Blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://dandkong.github.io/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://dandkong.github.io/ accesskey=h title="Dand (Alt + H)"><img src=https://dandkong.github.io/images/avatar.png alt aria-label=logo height=35>Dand</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://dandkong.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://dandkong.github.io/categories/ title=分类><span>分类</span></a></li><li><a href=https://dandkong.github.io/tags/ title=标签><span>标签</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://dandkong.github.io/>主页</a></div><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>状态同步与帧同步</h2></header><div class=entry-content><p>1. 状态同步 服务端接受客户端的操作，计算逻辑，分发到各客户端，游戏世界玩家没有属性变化，基本不会进行同步消息下发。
优点 服务端可靠 断线重连简单，把当前状态下发 缺点 回放需要单独的服务器，保存所有的状态，按时间发 服务器压力大，计算多 开发复杂 2. 帧同步 服务端只做转发操作，转发各个客户端，大多数帧同步的逻辑是只放在每个客户端的，无论是否有操作，每一帧都会有服务器数据下发。
优点 回放简单，只要把操作都记录下来就好 开发简单 缺点 不安全，客户端能篡改 断线重连需要把之前所有操作加速一遍 注意随机数每次都一样 3. 状态帧同步 状态帧同步就是状态同步和帧同步的概念相结合。客户端向服务器上传操作，服务器跑逻辑，但是又在按照固定的每一帧下发所有玩家的状态（属性位置等）给每一个客户端实现同步。客户端做预测，服务端做校验，不正确就回滚数据。
4. 参考 https://zhuanlan.zhihu.com/p/36884005 https://www.cnblogs.com/October2018/p/16120681.html</p></div><footer class=entry-footer><span title='2023-05-11 21:35:54 +0800 CST'>2023-5-11</span>&nbsp;·&nbsp;Dand</footer><a class=entry-link aria-label="post link to 状态同步与帧同步" href=https://dandkong.github.io/posts/%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%B8%A7%E5%90%8C%E6%AD%A5/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Lua知识点总结</h2></header><div class=entry-content><p>Lua知识点总结 1. 元表和元方法 __index元方法
> other = { foo = 3 } > t = setmetatable({}, { __index = other }) > t.foo 3 > t.bar nil mytable = setmetatable({key1 = "value1"}, { __index = function(mytable, key) if key == "key2" then return "metatablevalue" else return nil end end }) __nexindex方法
--没有的减赋值到元表中 mymetatable = {} mytable = setmetatable({key1 = "value1"}, { __newindex = mymetatable }) print(mytable.key1) mytable.newkey = "新值2" print(mytable.newkey,mymetatable.newkey) mytable....</p></div><footer class=entry-footer><span title='2023-04-11 21:40:59 +0800 CST'>2023-4-11</span>&nbsp;·&nbsp;Dand</footer><a class=entry-link aria-label="post link to Lua知识点总结" href=https://dandkong.github.io/posts/lua%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>STL总结</h2></header><div class=entry-content><p>分类 Vector动态数组 原理：连续的内存，start,end,max，max代表容量，end代表当前最大
扩容流程：申请空间，复制，清理
访问方式
//方式一：单个访问，假设num数组中已经有了5个元素 cout &lt;&lt; num[4] &lt;&lt; "\\n"; //输出第五个数据 //一二维可变数组和普通数组的访问方法一样 //方式二:遍历 for(int i = 0; i &lt; num.size(); i++) cout &lt;&lt; num[i] &lt;&lt; " ";//下标范围在[0,num.size()),前开后闭 //方式三：智能指针 for(auto i : num) cout &lt;&lt; i &lt;&lt; " "; list 概述：较快增删查
原理：双向链表
stack栈 概述：先进后出
原理：底层一般用list或deque实现，封闭头部即可，不用vector的原因应该是容量大小有限制，扩容耗时
queue队列 概述：先进先出
原理：底层一般用list或deque实现，封闭头部即可，不用vector的原因应该是容量大小有限制，扩容耗时
deque双端队列 概述：首位都能操作
原理：deque 容器的分段存储结构，提高了在序列两端添加或删除元素的效率，但也使该容器迭代器的底层实现变得更复杂。
priority_queue优先队列 概述：优先队列是在正常队列的基础上加了优先级，保证每次的队首元素都是优先级最大的。
原理：priority_queue的底层数据结构一般为vector为底层容器，堆heap为处理规则来管理底层容器
set和multiset集合 概述：set和multiset会根据特定的排序准则，自动将元素进行排序。不同的是后者允许元素重复而前者不允许
原理：底层红黑树，平衡二叉树可以保证在最坏情况下仍然具有较高的搜索效率，时间复杂度为O(logn)。
map和multimap 原理：底层红黑树
hash_set和hash_multiset 原理：哈希
hashmap/unordered_map和hash_multimap 原理：哈希
注意 什么时候需要用hash_map，什么时候需要用map? 总体来说，hash_map 查找速度会比map快，而且查找速度基本和数据量大小无关，属于常数级别;而map的查找速度是log(n)级别。并不一定常数就比log(n) 小，hash还有hash函数的耗时，明白了吧，如果你考虑效率，特别是在元素达到一定数量级时，考虑考虑hash_map。但若你对内存使用特别严格，希望程序尽可能少消耗内存，那么一定要小心，hash_map可能会让你陷入尴尬，特别是当你的hash_map对象特别多时，你就更无法控制了，而且hash_map的构造速度较慢。 现在知道如何选择了吗？权衡三个因素: 查找速度, 数据量, 内存使用。 参考 C++ STL deque容器底层实现原理（深度剖析）...</p></div><footer class=entry-footer><span title='2023-04-02 23:41:05 +0800 CST'>2023-4-2</span>&nbsp;·&nbsp;Dand</footer><a class=entry-link aria-label="post link to STL总结" href=https://dandkong.github.io/posts/stl%E6%80%BB%E7%BB%93/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>游戏输入模块</h2></header><div class=entry-content><p>概述 输入模块是游戏中的基础功能，主要有以下功能
为多平台提供统一接口支持，如移动设备和PC 触发开始按下，按下，抬起事件 区分点击UI和点击场景中的物体，执行不一样的逻辑 支持多点触控 多平台 PC上鼠标操作：Input.GetMouseButton(index) 移动设备：Input.GetTouch(index) 判断点击在UI上 主要用到EventSystem中的RaycastAll接口，参考https://blog.csdn.net/u013012420/article/details/106999229
public void RaycastAll(EventSystems.PointerEventData eventData, List&lt;RaycastResult> raycastResults); 点击流程</p></div><footer class=entry-footer><span title='2022-12-13 21:10:37 +0800 CST'>2022-12-13</span>&nbsp;·&nbsp;Dand</footer><a class=entry-link aria-label="post link to 游戏输入模块" href=https://dandkong.github.io/posts/%E6%B8%B8%E6%88%8F%E8%BE%93%E5%85%A5%E6%A8%A1%E5%9D%97/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>人物移动模块</h2></header><div class=entry-content><p>一、概述 游戏中角色移动分为了主动和被动，主动主要由玩家通过摇杆或者键盘进行操作，被动移动主要应用于自动寻路，通过寻路点行动。
二、主动移动 移动组件 移动组件主要用到Unity的移动组件Character Controller，主要属性如下
Height角色的高度，通常和现实中的人物一样设置为2米左右。 Radius角色的半径，用于控制人物的胖瘦。 Center设置角色中心点的位置。 Slope Limit限制角色能爬的最大坡度。通常设置为90度以下，这样角色就不会走到墙上。 Step Offset移动步长。通常2米左右的人移动步长设置在0.1到0.4米. Skin Width皮肤厚度。如果这个值太小角色容易被卡住，太大角色容易抖动。通常将这个数据设为0.01到角色半径的10%之间。 Min Move Distance最小移动距离。官方推荐把这个值设为0。 isGrounded可以获取角色当前是否在地面。 velocity可以获取角色当前的速度向量。 移动方法主要用到Move，Move方法需要自己实现重力的效果，看具体项目需求
//用摇杆控制方向，当按下空格键时跳起。 using UnityEngine; using System.Collections; public class ExampleClass : MonoBehaviour { public float speed = 6.0F; public float jumpSpeed = 8.0F; public float gravity = 20.0F; private Vector3 moveDirection = Vector3.zero; void Update() { CharacterController controller = GetComponent&lt;CharacterController>(); if (controller.isGrounded) { moveDirection = GetTargetPos(nowPos) - nowPos; // 跳跃 if (Input....</p></div><footer class=entry-footer><span title='2022-12-12 19:51:11 +0800 CST'>2022-12-12</span>&nbsp;·&nbsp;Dand</footer><a class=entry-link aria-label="post link to 人物移动模块" href=https://dandkong.github.io/posts/%E4%BA%BA%E7%89%A9%E7%A7%BB%E5%8A%A8%E6%A8%A1%E5%9D%97/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://dandkong.github.io/posts/page/2/>«&nbsp;上一页&nbsp;
</a><a class=next href=https://dandkong.github.io/posts/page/4/>下一页&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2024 <a href=https://dandkong.github.io/>Dand</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>